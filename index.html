<html>
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<link rel="icon" href="#">

<body>
    <script>


        let htmlString = '';
        let onlyHTML = true;
        async function digInDirectory(dir, githubPagesRoot) {
            let options = {
                method: 'GET',
                headers: {
                    "Accept": "application/vnd.github.v3+json",
                    "Authorization": "Bearer "
                }
            }
            const response = await fetch(dir, options);
            const data = await response.json();
            console.log('data', data);

            htmlString += '<ul>';
            for (let file of data) {
                if (file.name.charAt(0) === '.' || (file.download_url && !file.name.includes('html'))) {
                    continue;
                }
                let liveLink = "";
                if (onlyHTML && file.download_url) {
                    if (!file.name.includes('html')) continue;
                    htmlString = htmlString.slice(0, -10);
                    liveLink = `<a href="${githubPagesRoot}${file.path}">live</a></li>`;    //htmlString += `<li>, <a href="${file2._links.html}">${file2.name}</a>${liveLink}</li>`;// <a href="${githubPagesRoot}${file2.path}">live</a>
                    htmlString += `<a href="${file._links.html}"></a>  -- ${liveLink}`;
                } else {
                    htmlString += `<li><a href="${file._links.html}">${file.name}</a>${liveLink}</li>`;
                }

                //htmlString += `<li><a href="${file.name}">${file.name}</a>, <a href="${githubPagesRoot}${file.path}">live</a></li>`;
                if (!file.download_url) {
                    await digInDirectory(file.url, githubPagesRoot);
                } else {
                    htmlString += '<ul>';
                }
            }
            htmlString += '</ul>';
            document.body.innerHTML = htmlString;


            // let htmlString = '<ul>';
            // let onlyHTML = true;
            // async function digInDirectory(dir, githubPagesRoot, htmlString) {
            //     let options = {
            //         method: 'GET',
            //         headers: {
            //             "Accept": "application/vnd.github.v3+json",
            //             "Authorization": "Bearer "
            //         }
            //     }


            //     const response = await fetch(dir, options);
            //     const data = await response.json();
            //     console.log('dataccd', data);

            //     // let htmlString = '<ul>';

            //     for (let file of data) {
            //         if (file.name.charAt(0) === '.') {
            //             continue;
            //         }
            //         let liveLink = "";
            //         if (onlyHTML && file.name.includes('html') && file.download_url) {
            //             if (!file.name.includes('html')) continue;
            //             liveLink = `, <a href="${githubPagesRoot}${file.path}">live</a>`;    //htmlString += `<li>, <a href="${file2._links.html}">${file2.name}</a>${liveLink}</li>`;// <a href="${githubPagesRoot}${file2.path}">live</a>
            //         }
            //         htmlString += `<li><a href="${file._links.html}">${file.name}</a>${liveLink}</li>`;

            //         //htmlString += `<li><a href="${file.name}">${file.name}</a>, <a href="${githubPagesRoot}${file.path}">live</a></li>`;
            //         if (!file.download_url) {
            //             const response1 = await fetch(file.url, options);
            //             const data1 = await response1.json();
            //             console.log('dataccd', data1);
            //             htmlString += '<ul>';
            //             for (let file1 of data1) {
            //                 if (file1.name.charAt(0) === '.') {
            //                     continue;
            //                 }
            //                 let liveLink = "";
            //                 if (onlyHTML && file1.name.includes('html') && file1.download_url) {
            //                     if (!file1.name.includes('html')) continue;
            //                     liveLink = `, <a href="${githubPagesRoot}${file1.path}">live</a>`;    //htmlString += `<li>, <a href="${file2._links.html}">${file2.name}</a>${liveLink}</li>`;// <a href="${githubPagesRoot}${file2.path}">live</a>
            //                 }
            //                 htmlString += `<li><a href="${file1._links.html}">${file1.name}</a>${liveLink}</li>`;


            //                 //htmlString += `<li><a href="${file1._links.html}">${file1.name}</a>, <a href="${githubPagesRoot}${file1.path}">live</a></li>`;

            //                 if (!file1.download_url) {
            //                     const response2 = await fetch(file1.url, options);
            //                     const data2 = await response2.json();
            //                     console.log('dataccd', data2);
            //                     htmlString += '<ul>';
            //                     for (let file2 of data2) {
            //                         if (file2.name.charAt(0) === '.') {
            //                             continue;
            //                         }
            //                         let liveLink = "";
            //                         if (onlyHTML && file2.download_url) {
            //                             if (!file2.name.includes('html')) continue;
            //                             liveLink = `, <a href="${githubPagesRoot}${file2.path}">live</a>`;    //htmlString += `<li>, <a href="${file2._links.html}">${file2.name}</a>${liveLink}</li>`;// <a href="${githubPagesRoot}${file2.path}">live</a>
            //                         }
            //                         htmlString += `<li><a href="${file2._links.html}">${file2.name}</a>${liveLink}</li>`;

            //                         if (!file2.download_url) {
            //                             const response3 = await fetch(file2.url, options);
            //                             const data3 = await response3.json();
            //                             console.log('dataccd', data2);
            //                             htmlString += '<ul>';
            //                             for (let file3 of data3) {
            //                                 if (file3.name.charAt(0) === '.') {
            //                                     continue;
            //                                 }
            //                                 let liveLink = "";
            //                                 if (onlyHTML && file3.download_url) {
            //                                     if (!file3.name.includes('html')) continue;
            //                                     let last10 = htmlString.substr(htmlString.length - 10);
            //                                     console.log('last10', last10);
            //                                     // if (last10 === '</li>') {
            //                                     htmlString = htmlString.slice(0, -10);
            //                                     //}

            //                                     liveLink = `<a href="${githubPagesRoot}${file3.path}">live</a>`;    //htmlString += `<li>, <a href="${file2._links.html}">${file2.name}</a>${liveLink}</li>`;// <a href="${githubPagesRoot}${file2.path}">live</a>
            //                                     htmlString += ` -- <a href="${file3._links.html}"></a>  -- ${liveLink}</li></ul>`;
            //                                 } else {
            //                                     htmlString += `<li><a href="${file3._links.html}">${file3.name}</a>${liveLink}</li>`;
            //                                 }

            //                             }


            //                             htmlString += '</ul>';
            //                             // } else {
            //                             //htmlString += `<li><a href="${githubPagesRoot}${file1.download_url}">Click</a></li>`;
            //                         }





            //                     }
            //                     htmlString += '</ul>';
            //                     // } else {
            //                     //htmlString += `<li><a href="${githubPagesRoot}${file1.download_url}">Click</a></li>`;
            //                 }

            //             }
            //             htmlString += '</ul>';
            //             //} else {
            //             //  htmlString += `<li><a href="${file.download_url}">Click</a></li>`;
            //         }

            //     }

            //     htmlString += '</ul>';
            //     document.body.innerHTML = htmlString;

        }
        digInDirectory('https://api.github.com/repos/dano1234/SharedMindsF24/contents/', "https://dano1234.github.io/SharedMindsF24/");





        //     const response = await fetch(dir);
        //     const data = await response.json();
        //     console.log('datalin', data);

        //     htmlString += '<ul>';

        //     for (let file of data) {
        //         if (file.name.charAt(0) === '.') {
        //             continue;
        //         }
        //         htmlString += `<li><a href="${file.path}">${file.name}</a></li>`;
        //         if (!file.download_url) {
        //             htmlString += `<li><a href="javascript:digInDirectory(${file.url},${htmlString});">NextLevel</a></li>`;

        //             //     digInDirectory(file.url, htmlString);
        //         }
        //     }
        //     htmlString += '</ul>';
        //     console.log('htmlString', htmlString);

        // }
        // document.body.innerHTML = htmlString;
        // digInDirectory('https://api.github.com/repos/dano1234/SharedMindsF24/contents/', htmlString);
        // console.log('htmlString', htmlString);

        //document.getElementsByTagName('body').innerHTML = htmlString;
        //(async () => {
        // })()
    </script>

    <body>

</html>