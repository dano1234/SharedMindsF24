<html>
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<link rel="icon" href="#">

<body>
    <script>
        let htmlString = '';

        async function digInDirectory(dir, htmlString) {
            // let options = {
            //     method: 'GET',
            //     headers: {
            //         'Accept': 'application/vnd.github.v3+json'
            //             `Authorization: Bearer ${{ secrets.GITHUB_ACCESS_TOKEN }}.`
            //     }
            // };
            //     const response = await fetch(dir);
            //     const data = await response.json();
            //     console.log('datalin', data);

            //     htmlString += '<ul>';

            //     for (let file of data) {
            //         if (file.name.charAt(0) === '.') {
            //             continue;
            //         }
            //         htmlString += `<li><a href="${file.path}">${file.name}</a></li>`;
            //         if (!file.download_url) {
            //             htmlString += `<li><a href="javascript:digInDirectory(${file.url},${htmlString});">NextLevel</a></li>`;

            //             //     digInDirectory(file.url, htmlString);
            //         }
            //     }
            //     htmlString += '</ul>';
            //     console.log('htmlString', htmlString);

            // }
            // document.body.innerHTML = htmlString;
            // digInDirectory('https://api.github.com/repos/dano1234/SharedMindsF24/contents/', htmlString);
            // console.log('htmlString', htmlString);

            document.getElementsByTagName('body').innerHTML = htmlString;
            (async () => {
                const response = await fetch('https://api.github.com/repos/dano1234/SharedMindsF24/contents/');
                const data = await response.json();
                console.log('dataccd', data);

                let htmlString = '<ul>';

                for (let file of data) {
                    if (file.name.charAt(0) === '.') {
                        continue;
                    }
                    htmlString += `<li><a href="${file.path}">${file.name}</a></li>`;
                    if (!file.download_url) {
                        const response1 = await fetch(file.url);
                        const data1 = await response1.json();
                        htmlString += '<ul>';
                        for (let file1 of data1) {
                            if (file1.name.charAt(0) === '.') {
                                continue;
                            }
                            htmlString += `<li><a href="${file1.path}">${file1.name}</a></li>`;
                        }
                        htmlString += '</ul>';
                    }

                }

                htmlString += '</ul>';
                document.getElementsByTagName('body')[0].innerHTML = htmlString;
            })()
        }

    </script>

    <body>

</html>